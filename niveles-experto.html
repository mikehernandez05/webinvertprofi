<!DOCTYPE html>
<html class="dark" lang="es">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>InvertProfit ‚Äî Mundo Experto</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect fill='%230a0f1a' width='32' height='32' rx='6'/><text x='50%25' y='55%25' dominant-baseline='central' text-anchor='middle' font-size='18' fill='%23D4AF37'>IP</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="auth.js"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#D4AF37",
                        "bg-dark": "#0a0f1a",
                        "card": "#111827",
                        "card-border": "#1f2937",
                        "positive": "#22c55e",
                        "negative": "#ef4444"
                    },
                    fontFamily: { "sans": ["Inter", "sans-serif"] }
                }
            }
        }
    </script>
    <style>
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #374151; border-radius: 2px; }
        ::-webkit-scrollbar-thumb:hover { background: #818cf8; }

        .logo-glow { filter: drop-shadow(0 0 10px rgba(212,175,55,0.3)); }

        /* World background: purple/space theme */
        .world-bg {
            background:
                radial-gradient(ellipse at 20% 40%, rgba(99,102,241,0.1) 0%, transparent 60%),
                radial-gradient(ellipse at 80% 70%, rgba(129,140,248,0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 20%, rgba(168,85,247,0.05) 0%, transparent 40%),
                #0a0f1a;
        }

        /* Level node */
        .level-node {
            position: relative;
            z-index: 10;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .level-node:hover .node-btn { transform: scale(1.15); }
        .level-node.locked { cursor: not-allowed; opacity: 0.45; }

        .node-btn {
            width: 72px; height: 72px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem; font-weight: 900;
            transition: all 0.3s ease;
            position: relative;
        }
        .node-btn.active {
            background: radial-gradient(circle at 35% 35%, #a78bfa 0%, #818cf8 40%, #3730a3 100%);
            box-shadow: 0 0 30px rgba(129,140,248,0.8), 0 4px 15px rgba(0,0,0,0.5);
            border: 3px solid #818cf8;
            animation: active-pulse 2s ease-in-out infinite;
        }
        .node-btn.locked-node {
            background: radial-gradient(circle at 35% 35%, #374151 0%, #1f2937 60%, #111827 100%);
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            border: 3px solid rgba(75,85,99,0.4);
        }

        @keyframes active-pulse {
            0%,100% { box-shadow: 0 0 30px rgba(129,140,248,0.8), 0 4px 15px rgba(0,0,0,0.5); transform: scale(1); }
            50% { box-shadow: 0 0 50px rgba(129,140,248,1), 0 0 80px rgba(129,140,248,0.4), 0 4px 15px rgba(0,0,0,0.5); transform: scale(1.07); }
        }

        @keyframes float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-8px)} }
        .float-anim { animation: float 3s ease-in-out infinite; }

        /* Stars rating on nodes */
        .star-row { font-size: 0.75rem; line-height: 1; }

        /* Path dot animation */
        @keyframes path-dot { 0%,100%{opacity:0.3} 50%{opacity:1} }
        .path-dot { animation: path-dot 1.5s ease-in-out infinite; }
        .path-dot:nth-child(2) { animation-delay: 0.3s; }
        .path-dot:nth-child(3) { animation-delay: 0.6s; }
        .path-dot:nth-child(4) { animation-delay: 0.9s; }

        /* Sidebar */
        .sidebar-link { transition: all 0.2s ease; }
        .sidebar-link:hover { background: rgba(255,255,255,0.04); color: #fff; }
        .sidebar-link.active { background: rgba(212,175,55,0.15); color: #D4AF37; border: 1px solid rgba(212,175,55,0.2); }
        .hamburger-open .hamburger-line-1 { transform: rotate(45deg) translateY(8px); }
        .hamburger-open .hamburger-line-2 { opacity: 0; }
        .hamburger-open .hamburger-line-3 { transform: rotate(-45deg) translateY(-8px); }

        /* Level modal */
        .modal-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.75); z-index:200; display:flex; align-items:center; justify-content:center; backdrop-filter:blur(4px); }
        .modal-box { background:#111827; border:1px solid rgba(212,175,55,0.3); border-radius:24px; padding:32px; max-width:420px; width:calc(100% - 2rem); box-shadow: 0 0 60px rgba(212,175,55,0.15); }

        /* Floating decorations */
        @keyframes nebula-float { 0%{transform:translateY(0) rotate(-2deg)} 50%{transform:translateY(-15px) rotate(2deg)} 100%{transform:translateY(0) rotate(-2deg)} }
        .nebula { position:absolute; animation: nebula-float 7s ease-in-out infinite; font-size:1.5rem; pointer-events:none; opacity:0.4; }

        /* World header */
        @keyframes title-in { from{opacity:0; transform:translateY(-20px)} to{opacity:1; transform:translateY(0)} }
        .title-in { animation: title-in 0.6s ease-out forwards; }
    </style>
</head>
<body class="world-bg text-white font-sans min-h-screen flex flex-col overflow-x-hidden">

<!-- HEADER -->
<header class="border-b border-card-border bg-bg-dark/95 backdrop-blur sticky top-0 z-[60] shrink-0">
    <div class="flex items-center justify-between px-4 md:px-8 py-3 md:py-4">
        <div class="flex items-center gap-3">
            <a href="portadanivelesacademia.html"
               class="flex items-center gap-2 px-3 py-2 rounded-xl font-black text-xs uppercase tracking-widest transition-all hover:scale-105 active:scale-95 shrink-0"
               style="background:rgba(212,175,55,0.1); border:1px solid rgba(212,175,55,0.35); color:#D4AF37;">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/></svg>
                <span class="hidden sm:inline">Volver</span>
            </a>
            <div class="flex items-center gap-2.5">
                <img src="images/logo_azul.png" alt="InvertProfit" id="logo-img"
                     class="h-10 w-auto object-contain shrink-0"
                     style="filter:drop-shadow(0 0 10px rgba(212,175,55,0.4));"
                     onerror="this.style.display='none'; document.getElementById('logo-badge').style.display='flex';">
                <div id="logo-badge" class="w-11 h-11 rounded-xl items-center justify-center font-black text-lg shrink-0" style="display:none; background:linear-gradient(135deg,#D4AF37,#b8860b); color:#0a0f1a; box-shadow:0 0 30px rgba(212,175,55,0.4);">IP</div>
            </div>
        </div>
        <nav class="hidden lg:flex items-center gap-10">
            <a class="text-gray-400 hover:text-white transition text-sm font-semibold tracking-widest uppercase" href="index.html">INICIO</a>
            <a class="font-black border-b-2 border-primary pb-1 text-sm tracking-widest uppercase" style="color:#D4AF37;" href="portadanivelesacademia.html">ACADEMIA</a>
            <a class="text-gray-400 hover:text-white transition text-sm font-semibold tracking-widest uppercase" href="mercado.html">MERCADOS</a>
            <a class="text-gray-400 hover:text-white transition text-sm font-semibold tracking-widest uppercase" href="#">PORTAFOLIO</a>
        </nav>
        <div class="flex items-center gap-2 md:gap-4">
            <button class="shrink-0 bg-primary font-bold h-10 px-6 rounded-full inline-flex items-center gap-2 whitespace-nowrap hover:bg-primary/90 transition text-xs tracking-wide" style="color:#0a0f1a;">‚ö° CONECTAR BROKER</button>
            <div class="hidden md:flex items-center gap-3">
                <div class="w-9 h-9 bg-gradient-to-br from-primary/30 to-primary/10 border border-primary/30 rounded-full flex items-center justify-center text-xs font-black text-primary">AT</div>
            </div>
            <button id="hamburger-btn-inline" onclick="toggleSideMenu()" class="lg:hidden text-gray-400 hover:text-white p-2 flex flex-col gap-1.5 transition-all">
                <span class="hamburger-line-1 block w-6 h-0.5 bg-current transition-all duration-300"></span>
                <span class="hamburger-line-2 block w-6 h-0.5 bg-current transition-all duration-300"></span>
                <span class="hamburger-line-3 block w-6 h-0.5 bg-current transition-all duration-300"></span>
            </button>
        </div>
    </div>
    <nav id="mobile-menu" class="hidden lg:hidden border-t border-card-border bg-card px-4 py-3 space-y-2">
        <a class="block font-bold py-2 border-l-2 border-primary pl-3 text-sm" style="color:#D4AF37;" href="portadanivelesacademia.html">ACADEMIA</a>
        <a class="block text-gray-400 hover:text-white py-2 pl-3 text-sm" href="mercado.html">MERCADOS</a>
        <a class="block text-gray-400 hover:text-white py-2 pl-3 text-sm" href="#">PORTAFOLIO</a>
    </nav>
</header>

<!-- SIDE MENU -->
<aside id="side-menu" class="fixed top-0 left-0 h-full w-80 bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900 border-r border-gray-700 shadow-2xl transform -translate-x-full transition-transform duration-300 ease-in-out z-[65] flex flex-col">
    <nav class="flex-1 p-6 space-y-2 pt-24">
        <div class="mb-8 px-3">
            <p class="text-[10px] font-black text-primary/80 uppercase tracking-[4px] leading-none mb-2">Men√∫</p>
            <div class="h-[2px] w-10 bg-gradient-to-r from-primary/60 to-transparent rounded-full"></div>
        </div>
        <a href="portadanivelesacademia.html" class="sidebar-link flex items-center gap-3 px-5 py-4 rounded-xl text-sm font-bold text-gray-400"><span class="material-symbols-outlined text-[22px]">grid_view</span> Mundos</a>
        <a href="portadanivelesacademia.html" class="sidebar-link active flex items-center gap-3 px-5 py-4 rounded-xl text-sm font-bold"><span class="material-symbols-outlined text-[22px]">school</span> Academia</a>
        <a href="#" class="sidebar-link flex items-center gap-3 px-5 py-4 rounded-xl text-sm font-bold text-gray-400"><span class="material-symbols-outlined text-[22px]">emoji_events</span> Logros</a>
        <a href="mercado.html" class="sidebar-link flex items-center gap-3 px-5 py-4 rounded-xl text-sm font-bold text-gray-400"><span class="material-symbols-outlined text-[22px]">monitoring</span> Mercados</a>
    </nav>
    <div class="p-6 border-t border-gray-700">
        <div class="flex items-center gap-3">
            <div class="w-12 h-12 rounded-full bg-primary/20 border border-primary/30 flex items-center justify-center font-extrabold text-primary text-sm">AT</div>
            <div class="flex-1 min-w-0"><p class="text-sm font-bold truncate">Alex Trader</p><p class="text-[10px] text-primary font-bold uppercase tracking-wider">Pro Member</p></div>
            <a href="Login.html" class="text-gray-500 hover:text-red-400 transition"><span class="material-symbols-outlined text-[22px]">logout</span></a>
        </div>
    </div>
</aside>
<div id="menu-overlay" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] opacity-0 pointer-events-none transition-opacity duration-300" onclick="toggleSideMenu()"></div>

<!-- MAIN -->
<main class="flex-1 overflow-y-auto">

    <!-- World banner ‚Äî Purple/Space theme -->
    <div class="relative overflow-hidden" style="background:linear-gradient(180deg, rgba(99,102,241,0.12) 0%, rgba(10,15,26,0) 100%); border-bottom:1px solid rgba(129,140,248,0.2);">
        <!-- Decorative floating icons -->
        <div class="nebula" style="top:20px; left:5%; animation-delay:0s;">üß†</div>
        <div class="nebula" style="top:10px; left:15%; animation-delay:1s; font-size:1rem;">üîÆ</div>
        <div class="nebula" style="top:30px; right:10%; animation-delay:2s;">üèõÔ∏è</div>
        <div class="nebula" style="top:15px; right:25%; animation-delay:0.5s; font-size:1rem;">üíé</div>
        <div class="nebula" style="top:5px; left:45%; animation-delay:1.5s; font-size:0.8rem;">‚ö°</div>

        <div class="max-w-5xl mx-auto px-6 py-8">
            <div class="flex items-center gap-3 mb-3">
                <a href="portadanivelesacademia.html" class="flex items-center gap-1.5 text-gray-500 hover:text-indigo-400 transition text-sm font-semibold">
                    <span class="material-symbols-outlined text-[18px]">arrow_back</span> Mundos
                </a>
                <span class="text-gray-700">/</span>
                <span class="text-sm font-semibold" style="color:#818cf8;">Mundo 03 ‚Äî Experto</span>
            </div>
            <div class="flex items-center justify-between flex-wrap gap-4 title-in">
                <div class="flex items-center gap-5">
                    <div class="text-5xl float-anim">üåå</div>
                    <div>
                        <p class="text-[10px] font-black tracking-[5px] uppercase" style="color:rgba(129,140,248,0.7);">MUNDO 03</p>
                        <h1 class="text-3xl md:text-4xl font-black uppercase tracking-tight text-white">EXPERTO</h1>
                        <p class="text-gray-400 text-sm">Estrategias institucionales & psicolog√≠a de trading</p>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <div class="text-center">
                        <div class="text-2xl font-black" style="color:#818cf8;">0/12</div>
                        <div class="text-[10px] font-bold text-gray-500 uppercase tracking-wider">Completados</div>
                    </div>
                    <div class="w-px h-10 bg-card-border"></div>
                    <div class="text-center">
                        <div class="flex gap-1"><span class="text-gray-600">‚≠ê‚≠ê‚≠ê</span></div>
                        <div class="text-[10px] font-bold text-gray-500 uppercase tracking-wider">Estrellas</div>
                    </div>
                    <div class="w-px h-10 bg-card-border"></div>
                    <div class="text-center">
                        <div class="text-2xl font-black" style="color:#818cf8;">0</div>
                        <div class="text-[10px] font-bold text-gray-500 uppercase tracking-wider">XP ganada</div>
                    </div>
                </div>
            </div>
            <!-- Global progress bar -->
            <div class="mt-4 h-3 w-full rounded-full overflow-hidden bg-gray-800">
                <div class="h-full rounded-full" style="width:0%; background:linear-gradient(90deg, #4f46e5, #818cf8, #a78bfa);"></div>
            </div>
        </div>
    </div>

    <!-- LEVEL MAP -->
    <div class="max-w-3xl mx-auto px-4 py-10 pb-20">
        <p class="text-center text-[11px] font-black tracking-[5px] text-gray-600 uppercase mb-10">‚Äî MAPA DE NIVELES ‚Äî</p>

        <!-- Level nodes in Candy Crush style serpentine path -->
        <div class="relative flex flex-col items-center gap-0" id="level-map">

            <!-- ROW 1 ‚Äî Left to Right: Levels 1, 2, 3 -->
            <div class="flex justify-start w-full mb-0">
                <div class="flex items-center gap-0 relative w-full justify-between px-4 md:px-8">

                    <!-- Level 1 ‚Äî ACTIVE -->
                    <div class="level-node text-center" onclick="openModal(1,'Smart Money Concepts','Comprende c√≥mo operan las instituciones: order blocks, liquidity pools y market structure.','active',300)">
                        <div class="flex flex-col items-center gap-2">
                            <div class="node-btn active">1</div>
                            <div class="star-row text-gray-600">‚≠ê‚≠ê‚≠ê</div>
                            <div class="text-[10px] font-black uppercase tracking-wider" style="color:#818cf8;">NIV 1</div>
                        </div>
                    </div>

                    <!-- Connector dots (active glow) -->
                    <div class="flex-1 flex items-center justify-center gap-3 px-3" style="margin-bottom:24px;">
                        <div class="w-2.5 h-2.5 rounded-full path-dot" style="background:#818cf8; box-shadow:0 0 6px rgba(129,140,248,0.7);"></div>
                        <div class="w-2.5 h-2.5 rounded-full path-dot" style="background:#818cf8; box-shadow:0 0 6px rgba(129,140,248,0.7);"></div>
                        <div class="w-2.5 h-2.5 rounded-full path-dot" style="background:#818cf8; box-shadow:0 0 6px rgba(129,140,248,0.7);"></div>
                        <div class="w-2.5 h-2.5 rounded-full path-dot" style="background:#818cf8; box-shadow:0 0 6px rgba(129,140,248,0.7);"></div>
                    </div>

                    <!-- Level 2 ‚Äî LOCKED -->
                    <div class="level-node locked text-center">
                        <div class="flex flex-col items-center gap-2">
                            <div class="node-btn locked-node"><span class="material-symbols-outlined text-gray-500 text-2xl">lock</span></div>
                            <div class="star-row text-gray-700">‚≠ê‚≠ê‚≠ê</div>
                            <div class="text-[10px] font-black text-gray-600 uppercase tracking-wider">NIV 2</div>
                        </div>
                    </div>

                    <div class="flex-1 flex items-center justify-center gap-3 px-3" style="margin-bottom:24px;">
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                    </div>

                    <!-- Level 3 ‚Äî LOCKED -->
                    <div class="level-node locked text-center">
                        <div class="flex flex-col items-center gap-2">
                            <div class="node-btn locked-node"><span class="material-symbols-outlined text-gray-500 text-2xl">lock</span></div>
                            <div class="star-row text-gray-700">‚≠ê‚≠ê‚≠ê</div>
                            <div class="text-[10px] font-black text-gray-600 uppercase tracking-wider">NIV 3</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vertical connector down-right -->
            <div class="self-end mr-16 md:mr-24 flex flex-col items-center gap-2 my-1">
                <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
            </div>

            <!-- ROW 2 ‚Äî Right to Left: Levels 4, 5, 6 (BOSS) -->
            <div class="flex justify-end w-full">
                <div class="flex items-center gap-0 relative w-full justify-between px-4 md:px-8 flex-row-reverse">

                    <!-- Level 4 ‚Äî LOCKED -->
                    <div class="level-node locked text-center">
                        <div class="flex flex-col items-center gap-2">
                            <div class="node-btn locked-node"><span class="material-symbols-outlined text-gray-500 text-2xl">lock</span></div>
                            <div class="star-row text-gray-700">‚≠ê‚≠ê‚≠ê</div>
                            <div class="text-[10px] font-black text-gray-600 uppercase tracking-wider">NIV 4</div>
                        </div>
                    </div>

                    <div class="flex-1 flex items-center justify-center gap-3 px-3 flex-row-reverse" style="margin-bottom:24px;">
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                    </div>

                    <!-- Level 5 ‚Äî LOCKED -->
                    <div class="level-node locked text-center">
                        <div class="flex flex-col items-center gap-2">
                            <div class="node-btn locked-node"><span class="material-symbols-outlined text-gray-500 text-2xl">lock</span></div>
                            <div class="star-row text-gray-700">‚≠ê‚≠ê‚≠ê</div>
                            <div class="text-[10px] font-black text-gray-600 uppercase tracking-wider">NIV 5</div>
                        </div>
                    </div>

                    <div class="flex-1 flex items-center justify-center gap-3 px-3 flex-row-reverse" style="margin-bottom:24px;">
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                    </div>

                    <!-- Level 6 BOSS ‚Äî LOCKED -->
                    <div class="level-node locked text-center">
                        <div class="flex flex-col items-center gap-2">
                            <div class="node-btn locked-node relative" style="width:84px; height:84px; font-size:1.75rem; opacity:0.5;">
                                <span style="position:absolute;top:-8px;right:-8px;font-size:0.65rem;background:#374151;color:#9ca3af;border-radius:999px;padding:2px 7px;font-weight:900;">BOSS</span>
                                <span class="material-symbols-outlined text-gray-600 text-3xl">lock</span>
                            </div>
                            <div class="star-row text-gray-700">‚≠ê‚≠ê‚≠ê</div>
                            <div class="text-[10px] font-black text-gray-600 uppercase tracking-wider">NIV 6</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vertical connector down-left -->
            <div class="self-start ml-16 md:ml-24 flex flex-col items-center gap-2 my-1">
                <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
            </div>

            <!-- ROW 3 ‚Äî Left to Right: Levels 7, 8, 9 ‚Äî LOCKED -->
            <div class="flex justify-start w-full">
                <div class="flex items-center gap-0 relative w-full justify-between px-4 md:px-8">

                    <!-- Level 7 ‚Äî LOCKED -->
                    <div class="level-node locked text-center">
                        <div class="flex flex-col items-center gap-2">
                            <div class="node-btn locked-node"><span class="material-symbols-outlined text-gray-500 text-2xl">lock</span></div>
                            <div class="star-row text-gray-700">‚≠ê‚≠ê‚≠ê</div>
                            <div class="text-[10px] font-black text-gray-600 uppercase tracking-wider">NIV 7</div>
                        </div>
                    </div>

                    <div class="flex-1 flex items-center justify-center gap-3 px-3" style="margin-bottom:24px;">
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                    </div>

                    <!-- Level 8 ‚Äî LOCKED -->
                    <div class="level-node locked text-center">
                        <div class="flex flex-col items-center gap-2">
                            <div class="node-btn locked-node"><span class="material-symbols-outlined text-gray-500 text-2xl">lock</span></div>
                            <div class="star-row text-gray-700">‚≠ê‚≠ê‚≠ê</div>
                            <div class="text-[10px] font-black text-gray-600 uppercase tracking-wider">NIV 8</div>
                        </div>
                    </div>

                    <div class="flex-1 flex items-center justify-center gap-3 px-3" style="margin-bottom:24px;">
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                    </div>

                    <!-- Level 9 ‚Äî LOCKED -->
                    <div class="level-node locked text-center">
                        <div class="flex flex-col items-center gap-2">
                            <div class="node-btn locked-node"><span class="material-symbols-outlined text-gray-500 text-2xl">lock</span></div>
                            <div class="star-row text-gray-700">‚≠ê‚≠ê‚≠ê</div>
                            <div class="text-[10px] font-black text-gray-600 uppercase tracking-wider">NIV 9</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vertical connector down-right -->
            <div class="self-end mr-16 md:mr-24 flex flex-col items-center gap-2 my-1">
                <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
            </div>

            <!-- ROW 4 ‚Äî Right to Left: Levels 10, 11, 12 FINAL BOSS ‚Äî LOCKED -->
            <div class="flex justify-end w-full">
                <div class="flex items-center gap-0 relative w-full justify-between px-4 md:px-8 flex-row-reverse">

                    <!-- Level 10 ‚Äî LOCKED -->
                    <div class="level-node locked text-center">
                        <div class="flex flex-col items-center gap-2">
                            <div class="node-btn locked-node"><span class="material-symbols-outlined text-gray-500 text-2xl">lock</span></div>
                            <div class="star-row text-gray-700">‚≠ê‚≠ê‚≠ê</div>
                            <div class="text-[10px] font-black text-gray-600 uppercase tracking-wider">NIV 10</div>
                        </div>
                    </div>

                    <div class="flex-1 flex items-center justify-center gap-3 px-3 flex-row-reverse" style="margin-bottom:24px;">
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                    </div>

                    <!-- Level 11 ‚Äî LOCKED -->
                    <div class="level-node locked text-center">
                        <div class="flex flex-col items-center gap-2">
                            <div class="node-btn locked-node"><span class="material-symbols-outlined text-gray-500 text-2xl">lock</span></div>
                            <div class="star-row text-gray-700">‚≠ê‚≠ê‚≠ê</div>
                            <div class="text-[10px] font-black text-gray-600 uppercase tracking-wider">NIV 11</div>
                        </div>
                    </div>

                    <div class="flex-1 flex items-center justify-center gap-3 px-3 flex-row-reverse" style="margin-bottom:24px;">
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-gray-700"></div>
                    </div>

                    <!-- Level 12 FINAL BOSS ‚Äî LOCKED -->
                    <div class="level-node locked text-center">
                        <div class="flex flex-col items-center gap-2">
                            <div class="node-btn locked-node relative" style="width:88px; height:88px; font-size:2rem; opacity:0.5;">
                                <span style="position:absolute;top:-10px;right:-10px;font-size:0.65rem;background:#374151;color:#9ca3af;border-radius:999px;padding:2px 7px;font-weight:900;">FINAL</span>
                                <span class="material-symbols-outlined text-gray-600 text-3xl">lock</span>
                            </div>
                            <div class="star-row text-gray-700">‚≠ê‚≠ê‚≠ê</div>
                            <div class="text-[10px] font-black text-gray-600 uppercase tracking-wider">NIV 12</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Current quest indicator -->
            <div class="w-full mt-10">
                <div class="mx-4 rounded-2xl p-5 flex items-center gap-4" style="background:linear-gradient(135deg, rgba(129,140,248,0.12) 0%, rgba(99,102,241,0.06) 100%); border:1px solid rgba(129,140,248,0.3);">
                    <div class="text-3xl float-anim">üß†</div>
                    <div class="flex-1">
                        <p class="text-[10px] font-black tracking-[4px] uppercase mb-1" style="color:rgba(129,140,248,0.8);">NIVEL ACTUAL</p>
                        <p class="font-black text-white text-sm">Completa "Smart Money Concepts" para desbloquear los siguientes niveles.</p>
                        <p class="text-gray-500 text-xs mt-1">Completa el Mundo Intermedio para acceder a este mundo.</p>
                    </div>
                    <button onclick="openModal(1,'Smart Money Concepts','Comprende c√≥mo operan las instituciones: order blocks, liquidity pools y market structure.','active',300)" class="shrink-0 px-5 py-2.5 rounded-xl font-black uppercase tracking-wider text-xs transition hover:scale-105 whitespace-nowrap" style="background:linear-gradient(135deg,#4f46e5,#818cf8);color:#fff;">
                        ‚ñ∂ JUGAR
                    </button>
                </div>
            </div>

        </div>
    </div>
</main>

<!-- LEVEL MODAL -->
<div id="level-modal" class="modal-overlay hidden" onclick="if(event.target===this)closeModal()">
    <div class="modal-box">
        <div class="flex items-center justify-between mb-5">
            <span id="modal-badge" class="inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider" style="background:rgba(129,140,248,0.15); color:#818cf8; border:1px solid rgba(129,140,248,0.4);">‚ñ∂ En Progreso</span>
            <button onclick="closeModal()" class="text-gray-500 hover:text-white transition"><span class="material-symbols-outlined">close</span></button>
        </div>
        <div class="text-5xl text-center mb-4" id="modal-icon">üìö</div>
        <h3 class="text-xl font-black text-center uppercase tracking-tight mb-2" id="modal-title">T√≠tulo</h3>
        <p class="text-gray-400 text-sm text-center mb-5 leading-relaxed" id="modal-desc">Descripci√≥n</p>
        <div class="flex justify-center gap-1 mb-5" id="modal-stars">‚≠ê‚≠ê‚≠ê</div>
        <div class="flex items-center justify-between mb-5 bg-card rounded-xl px-4 py-3" style="border:1px solid rgba(212,175,55,0.15);">
            <span class="text-[11px] font-bold text-gray-500 uppercase tracking-wider">XP a ganar</span>
            <span class="font-black text-primary" id="modal-xp">+300 XP</span>
        </div>
        <button id="modal-cta" onclick="window.location.href='leccion.html'" class="w-full py-3 rounded-2xl font-black uppercase tracking-wider text-sm transition hover:scale-105" style="background:linear-gradient(135deg,#4f46e5,#818cf8);color:#fff;">
            ‚ñ∂ JUGAR NIVEL
        </button>
    </div>
</div>

<script>
function toggleSideMenu() {
    const menu = document.getElementById('side-menu');
    const overlay = document.getElementById('menu-overlay');
    const hamburger = document.getElementById('hamburger-btn-inline');
    if (menu.classList.contains('-translate-x-full')) {
        menu.classList.remove('-translate-x-full');
        overlay.classList.remove('opacity-0', 'pointer-events-none');
        if (hamburger) hamburger.classList.add('hamburger-open');
    } else {
        menu.classList.add('-translate-x-full');
        overlay.classList.add('opacity-0', 'pointer-events-none');
        if (hamburger) hamburger.classList.remove('hamburger-open');
    }
}

const icons = ['üß†','üîÆ','üèõÔ∏è','üíé','üì°','‚ö°','üåÄ','üéØ','üõ°Ô∏è','üìä','üí∞','üèÜ'];
function openModal(num, title, desc, status, xp) {
    const badge = document.getElementById('modal-badge');
    const cta = document.getElementById('modal-cta');
    if (status === 'completed') {
        badge.textContent = '‚úì Completado';
        badge.style.cssText = 'background:rgba(34,197,94,0.15);color:#22c55e;border:1px solid rgba(34,197,94,0.3);display:inline-flex;align-items:center;gap:6px;padding:4px 12px;border-radius:999px;font-size:10px;font-weight:900;text-transform:uppercase;letter-spacing:0.05em;';
        document.getElementById('modal-stars').textContent = '‚≠ê‚≠ê‚≠ê';
        cta.style.cssText = 'background:linear-gradient(135deg,#16a34a,#4ade80);color:#0a0f1a;width:100%;padding:12px;border-radius:16px;font-weight:900;text-transform:uppercase;letter-spacing:0.1em;font-size:14px;transition:all 0.2s;cursor:pointer;border:none;';
        cta.textContent = 'REPASAR NIVEL';
    } else {
        badge.innerHTML = '<span style="display:inline-block;width:6px;height:6px;border-radius:50%;background:#818cf8;animation:path-dot 1s ease-in-out infinite;"></span> En Progreso';
        badge.style.cssText = 'background:rgba(129,140,248,0.15);color:#818cf8;border:1px solid rgba(129,140,248,0.4);display:inline-flex;align-items:center;gap:6px;padding:4px 12px;border-radius:999px;font-size:10px;font-weight:900;text-transform:uppercase;letter-spacing:0.05em;';
        document.getElementById('modal-stars').textContent = '‚≠ê‚≠ê‚≠ê (por ganar)';
        cta.style.cssText = 'background:linear-gradient(135deg,#4f46e5,#818cf8);color:#fff;width:100%;padding:12px;border-radius:16px;font-weight:900;text-transform:uppercase;letter-spacing:0.1em;font-size:14px;transition:all 0.2s;cursor:pointer;border:none;';
        cta.textContent = '‚ñ∂ JUGAR NIVEL';
    }
    document.getElementById('modal-title').textContent = 'Nivel ' + num + ': ' + title;
    document.getElementById('modal-desc').textContent = desc;
    document.getElementById('modal-xp').textContent = '+' + xp + ' XP';
    document.getElementById('modal-icon').textContent = icons[num - 1] || 'üìö';
    document.getElementById('level-modal').classList.remove('hidden');
}
function closeModal() {
    document.getElementById('level-modal').classList.add('hidden');
}
</script>
</body>
</html>
